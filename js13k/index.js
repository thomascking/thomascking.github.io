(()=>{let t=0,e=0,n=500,a=500,r=0,o=0,s=0,i=0,c=!1,l=!1,h=0;const f=t=>document.getElementById(t),u=f("left"),g=f("right"),d=f("backStart"),m=f("backOff");window.onkeydown=t=>{switch(t.key){case"Enter":h||S();break;case" ":s||(s=1,d.beginElement());break;case"ArrowLeft":c||(i-=1,c=!0,b(g,"specularConstant","1"));break;case"ArrowRight":l||(i+=1,l=!0,b(u,"specularConstant","1"))}},window.onkeyup=t=>{switch(t.key){case" ":s&&(s=0,m.beginElement());break;case"ArrowLeft":c&&(i+=1,c=!1,b(g,"specularConstant",".01")),e=0;break;case"ArrowRight":l&&(i-=1,l=!1,b(u,"specularConstant",".01")),e=0}};const p=f("stars"),w=f("ship"),y=f("lightTrans"),k=f("lightTrans2"),M=f("spedometer");let $=f("lastLight");const A=[],b=(t,e,n)=>t.setAttribute(e,n),C=t=>document.createElementNS("http://www.w3.org/2000/svg",t),x=(t,e,n,a)=>{const r=`#f${Math.min(15,Math.floor(64*(a-.5))).toString(16)}${Math.max(0,Math.floor(63*(a-.75))).toString(16)}`,o=C("circle");b(o,"fill",r),b(o,"transform",`translate(${t} ${e}) scale(${n})`),b(o,"r","50"),b(o,"filter","url(#blurMe)"),p.appendChild(o);const s=`light${A.length}`,i=`out${A.length}`,c=C("feSpecularLighting");b(c,"in","translated"),b(c,"specularExponent","20"),b(c,"specularConstant","5"),b(c,"surfaceScale","15"),b(c,"lighting-color",r);const l=C("fePointLight");b(l,"x",`${t}`),b(l,"y",`${e}`),b(l,"z","200"),c.appendChild(l);const h=C("feComposite");b(h,"in",i),b(h,"in2",s),b(h,"operator","arithmetic"),b(h,"k1","0"),b(h,"k2","1"),b(h,"k3","1"),b(h,"k4","0"),b($,"result",i),$.after(c,h),$=h,A.push({x:t,y:e,size:n,density:a})};let T;x(0,0,1.5,.5),x(1e3,200,.75,.75),x(500,900,.5,1);const E=()=>{h=requestAnimationFrame(E);let c=performance.now(),l=c-T;T=c;let f=t*Math.PI/180;r-=.00625*r,o-=.00625*o;for(let t of A){const e=n-t.x,s=a-t.y,i=Math.sqrt(e*e+s*s);i<50*t.size+15&&q();const c=Math.atan2(e,s),h=30*t.size*t.density/(i*i);o+=h*l*Math.cos(c),r+=h*l*Math.sin(c)}o+=275e-6*s*l*Math.cos(f),r+=275e-6*s*l*-Math.sin(f);let u=Math.sqrt(r*r+o*o);n+=-r*l,a+=-o*l,e+=.001*i*l,e>.5&&(e=.5),e<-.5&&(e=-.5),t+=e*l,b(p,"transform",`translate(${500-n} ${500-a})`),b(w,"transform",`rotate(${t})`),M.innerHTML=`${Math.round(100*u)}`,b(y,"dx",`${n}`),b(y,"dy",`${a}`),b(k,"dx",""+-n),b(k,"dy",""+-a)},S=()=>{n=500,a=500,r=0,o=0,e=0,t=0,s=0,i=0,T=performance.now(),E(),L=R.createBufferSource(),L.buffer=z,L.connect(R.destination),L.loop=!0,L.start()},q=()=>{cancelAnimationFrame(h),h=0,L.stop()};let L,z;const O=new OfflineAudioContext(1,529200,44100),R=new AudioContext,B=O.createGain(),F=O.createOscillator();F.connect(B),B.connect(O.destination),B.gain.setValueAtTime(.1,0),F.type="triangle";const I=33,P=37,V=41,v=44,G=49;let H=0;F.frequency.setValueAtTime(0,0),[[I,.25],[I,.25],[G,.25],[G,.25],[55,.25],[55,.25],[G,.5],[v,.25],[v,.25],[V,.25],[V,.25],[P,.25],[P,.25],[I,.5],[G,.25],[G,.25],[v,.25],[v,.25],[V,.25],[V,.25],[P,.5],[G,.25],[G,.25],[v,.25],[v,.25],[V,.25],[V,.25],[P,.5],[I,.25],[I,.25],[G,.25],[G,.25],[55,.25],[55,.25],[G,.5],[v,.25],[v,.25],[V,.25],[V,.25],[P,.25],[P,.25],[I,.5]].forEach((([t,e])=>function(t,e){F.frequency.setTargetAtTime(t,H,.1*e),F.frequency.setTargetAtTime(0,H+.8*e,.1*e),H+=e}(t,e))),F.start(0),O.startRendering().then((t=>{z=t}))})();